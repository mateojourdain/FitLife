<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Page de recap</title>
</head>

<body>
    <!-- Pour se connecter à la base de données -->

    <div class="app-container">
        <div class="header">
            <h1>FitLife </h1>
            <div class="date" id="currentDate"></div>
        </div>
        <!-- page d'accueil -->
        <div id="home" class="page active">

            <!-- card récap -->
            <div class="card" style="width: 100%;     background: linear-gradient(135deg, #1a1a1a 0%, #0f0f0f 100%);     border: 1px solid #222;
    border-radius: 12px;">
                <div style="display: flex; flex-direction: column; gap: 10px;">
                    <div style="font-size: 14px; color: #9AA4A8; text-transform: uppercase; font-weight: 600;">
                        Séances Réalisées (Semaine)
                    </div>
                    <div style="font-size: 44px; font-weight: 900; background: linear-gradient(135deg, #00f5ff 0%, #0080ff 100%); 
                        background-clip: text;
                        -webkit-text-fill-color: transparent; line-height: 1;">
                        <span id="totalSessions">4

                        </span>
                        <span style="font-size: 18px; font-weight: 500; margin-left: 5px;">/
                            5 Objectif</span>
                    </div>

                    <div style="margin-top: 10px; border-top: 1px solid #202025; padding-top: 10px;">
                        <div class="background">
                            <div class="stat-line" style="margin-bottom: 8px;">
                                <div style="font-size: 14px;     color: #666; font-weight: 600;">En salle de sport</div>
                                <div style="font-size: 20px; font-weight: 700; color: #00BFFF;" id="gymSessions">3
                                </div>
                            </div>
                            <div class="stat-line">
                                <div style="font-size: 14px;     color: #666; font-weight: 600;">A la maison</div>
                                <div style="font-size: 20px; font-weight: 700; color: #00BFFF;" id="homeSessions">1
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <!-- calendrier hebdomadaire -->
            <div class="section-title">Activité Hebdomadaire</div>
            <div class="card">
                <div class="days-grid">
                    <div class="day-item">
                        <div class="day-name">LUN</div>
                        <div class="day-circle gym">✓</div>
                    </div>
                    <div class="day-item">
                        <div class="day-name">MAR</div>
                        <div class="day-circle home">✓</div>
                    </div>
                    <div class="day-item">
                        <div class="day-name">MER</div>
                        <div class="day-circle gym">✓</div>
                    </div>
                    <div class="day-item">
                        <div class="day-name">JEU</div>
                        <div class="day-circle home">✓</div>
                    </div>
                    <div class="day-item">
                        <div class="day-name">VEN</div>
                        <div class="day-circle today">28</div>
                    </div>
                    <div class="day-item">
                        <div class="day-name">SAM</div>
                        <div class="day-circle">29</div>
                    </div>
                    <div class="day-item">
                        <div class="day-name">DIM</div>
                        <div class="day-circle">30</div>
                    </div>
                </div>
                <div class="point-container">
                    <div class="point-container" id="home-container">
                        <div class="point"></div>
                        <h3>Maison</h3>
                    </div>
                    <div class="point-container" id="gym-container">
                        <div class="point"></div>
                        <h3>Salle</h3>
                    </div>
                </div>
            </div>

            <!-- hydratation -->
            <div class="section-title">hydratation</div>
            <div class="hydration-card">

                <div class="hydration-header">
                    <div class="hydration-count"><span id="currentWater"></span>L / <span id="targetWater">3.2</span>L
                    </div>
                </div>
                <div class="hydration-bar">
                    <div class="hydration-progress" id="hydrationProgress"></div>
                </div>
                <div class="hydration-target">Objectif quotidien</div>
                <div class="hydration-controls">
                    <button class="hydration-btn" onclick="adjustWater(-0.2)">−</button>
                    <div class="hydration-amount">+/- 0.2L</div>
                    <button class="hydration-btn" onclick="adjustWater(0.2)">+</button>
                </div>

                <p class="indication-hydration">* Un verre d'eau de taille standard contient environ 0.2L</p>
            </div>

        </div>
        <!-- page sport -->
        <div id="workout" class="page">
            <!-- calendrier mensuel-->

            <div class="months-header">
                <button id="prevMonth" class="nav-button">‹</button>
                <h2 id="monthYear"></h2>
                <button id="nextMonth" class="nav-button">›</button>
            </div>
            <div class="card">
                <div class="calendar-container" id="calendarContainer">
                    <div class="calendar-days-header">
                        <span>Lun</span>
                        <span>Mar</span>
                        <span>Mer</span>
                        <span>Jeu</span>
                        <span>Ven</span>
                        <span>Sam</span>
                        <span>Dim</span>
                    </div>

                    <div class="calendar-grid" id="calendarGrid">
                    </div>
                </div>

                <div class="event-details hidden" id="eventDetails">
                    <h3 id="selectedDateDisplay"></h3>

                    <!-- bouton ajouter une seance  -->
                    <button class="btn-primary">+ Nouvelle Séance</button>
                </div>
            </div>

        </div>















        <!-- page nutrition -->
        <div id="nutrition" class="page">
        </div>


        <!-- BOTTOM NAVIGATION -->
        <div class="bottom-nav">
            <button class="nav-item active" onclick="switchPage('home')">
                <div class="nav-icon"><img src="home.png"></div>
                <div class="nav-label">Accueil</div>
            </button>
            <button class="nav-item" onclick="switchPage('workout')">
                <div class="nav-icon"><img src="haltere.png"></div>
                <div class="nav-label">Sport</div>
            </button>
            <button class="nav-item" onclick="switchPage('nutrition')">
                <div class="nav-icon"><img src="nourriture.png"></div>
                <div class="nav-label">Nutrition</div>
            </button>
        </div>
    </div>
</body>
<!-- script page accueil -->
<script>
    // script pour faire fonctionner la date en haut de la page
    document.addEventListener('DOMContentLoaded', () => {
        const dateElement = document.getElementById('currentDate');

        const date = new Date();
        const options = {
            weekday: 'long',
            day: 'numeric',
            month: 'long',
            year: 'numeric'
        };
        let dateString = date.toLocaleDateString('fr-FR', options);

        // Met la première lettre de la date ET du mois en majuscule
        dateString = dateString
            .split(' ')
            .map((word, i) => {
                // On met la première lettre du premier mot et du mois en majuscule
                if (i === 0 || (i > 1 && isNaN(word))) {
                    return word.charAt(0).toUpperCase() + word.slice(1);
                }
                return word;
            })
            .join(' ');

        dateElement.textContent = dateString;

        updateHydrationUI();
    });

    // --- FONCTIONS POUR L'HYDRATATION ---

    const TARGET_WATER = 3.2; // Votre objectif en litres
    const STORAGE_KEY = 'dailyWaterAmount'; // Clé de sauvegarde dans le navigateur

    function getInitialWaterAmount() {
        // Récupère la valeur sauvegardée, ou utilise 1.6 comme valeur initiale
        const storedAmount = localStorage.getItem(STORAGE_KEY);
        // S'assurer de renvoyer un nombre (par défaut 1.6)
        return parseFloat(storedAmount) || 1.6;
    }

    let currentWater = getInitialWaterAmount();

    /**
     * Met à jour l'affichage des litres et de la barre de progression.
     */
    function updateHydrationUI() {
        const currentWaterElement = document.getElementById('currentWater');
        const progressElement = document.getElementById('hydrationProgress');

        // 1. Mise à jour des litres (avec 1 décimale)
        currentWaterElement.textContent = currentWater.toFixed(1);

        // 2. Calcul du pourcentage et mise à jour de la barre
        let percentage = (currentWater / TARGET_WATER) * 100;

        // Limiter la barre à 100%
        if (percentage > 100) {
            percentage = 100;
        } else if (percentage < 0) {
            percentage = 0;
        }

        progressElement.style.width = percentage + '%';

        // 3. Sauvegarde dans le navigateur pour ne pas perdre la progression
        localStorage.setItem(STORAGE_KEY, currentWater.toFixed(1));
    }


    /**
     * Modifie la quantité d'eau bue.
     * Cette fonction est appelée par les boutons onclick="adjustWater(0.2)".
     */
    function adjustWater(amount) {
        // Ajout/Retrait avec arrondi pour éviter les erreurs de virgule flottante JS
        currentWater = parseFloat((currentWater + amount).toFixed(1));

        // S'assurer que le montant n'est jamais négatif
        if (currentWater < 0) {
            currentWater = 0;
        }

        updateHydrationUI();
    }

    // changer de page
    function switchPage(pageName) {
        const pages = document.querySelectorAll('.page');
        const navItems = document.querySelectorAll('.nav-item');

        pages.forEach(page => page.classList.remove('active'));
        navItems.forEach(item => item.classList.remove('active'));

        document.getElementById(pageName).classList.add('active');
        event.target.closest('.nav-item').classList.add('active');
    }

    const checkboxes = document.querySelectorAll('.checkbox');
    checkboxes.forEach(box => {
        box.addEventListener('click', function () {
            this.classList.toggle('checked');
        });
    });
    updateHydration();

    // Calendrier mensuel de la page sport

    document.addEventListener('DOMContentLoaded', () => {
        const monthYearDisplay = document.getElementById('monthYear');
        const calendarGrid = document.getElementById('calendarGrid');
        const prevButton = document.getElementById('prevMonth');
        const nextButton = document.getElementById('nextMonth');

        let currentDate = new Date(); // Date actuelle pour suivre le mois affiché

        // Noms des mois en français
        const months = [
            "Janvier", "Février", "Mars", "Avril", "Mai", "Juin",
            "Juillet", "Août", "Septembre", "Octobre", "Novembre", "Décembre"
        ];

        /**
         * Rend le calendrier pour le mois et l'année donnés.
         * @param {Date} date - La date à afficher (le mois et l'année sont utilisés).
         */
        function renderCalendar(date) {
            const currentYear = date.getFullYear();
            const currentMonth = date.getMonth();
            const today = new Date();

            // 1. Mise à jour de l'en-tête (Mois Année)
            monthYearDisplay.textContent = `${months[currentMonth]} ${currentYear}`;

            // 2. Calcul des dates du mois
            // date(année, mois + 1, 0) donne le dernier jour du mois précédent, donc le jour '0' du mois actuel.
            const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();

            // date(année, mois, 1) donne le premier jour du mois actuel.
            // getDay() renvoie 0 (Dimanche) à 6 (Samedi). On ajuste pour commencer à Lundi (1) jusqu'à Dimanche (7).
            let firstDayOfWeek = new Date(currentYear, currentMonth, 1).getDay();
            if (firstDayOfWeek === 0) firstDayOfWeek = 7; // Si Dimanche, le mettre à 7.

            // Le décalage pour le premier jour est (firstDayOfWeek - 1) car Lun=1, Mar=2, ...
            const startDayOffset = firstDayOfWeek - 1;

            // 3. Remplissage de la grille
            calendarGrid.innerHTML = ''; // Vide la grille existante

            // Jours vides (décalage) pour le début du mois
            for (let i = 0; i < startDayOffset; i++) {
                const dayElement = document.createElement('div');
                dayElement.classList.add('day', 'empty');
                calendarGrid.appendChild(dayElement);
            }

            // Jours du mois
            for (let day = 1; day <= daysInMonth; day++) {
                const dayElement = document.createElement('div');
                dayElement.classList.add('day', 'current-month');
                dayElement.textContent = day;

                // Marquer le jour actuel (Aujourd'hui)
                if (currentYear === today.getFullYear() &&
                    currentMonth === today.getMonth() &&
                    day === today.getDate()) {
                    dayElement.classList.add('today');
                }

                calendarGrid.appendChild(dayElement);
            }
        }

        // --- Gestion des événements de navigation ---

        prevButton.addEventListener('click', () => {
            // Recule d'un mois
            currentDate.setMonth(currentDate.getMonth() - 1);
            renderCalendar(currentDate);
        });

        nextButton.addEventListener('click', () => {
            // Avance d'un mois
            currentDate.setMonth(currentDate.getMonth() + 1);
            renderCalendar(currentDate);
        });

        // Afficher le calendrier initial
        renderCalendar(currentDate);
    });


</script>
<!-- script page sport -->
<script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- Déclarations des éléments et variables ---
        const calendarContainer = document.getElementById('calendarContainer');
        const eventDetails = document.getElementById('eventDetails');
        const selectedDateDisplay = document.getElementById('selectedDateDisplay');
        // Sélection du bouton 'Ajouter une séance'
        const addButton = document.querySelector('#eventDetails .btn-primary');

        const monthYearDisplay = document.getElementById('monthYear');
        const calendarGrid = document.getElementById('calendarGrid');
        const prevButton = document.getElementById('prevMonth');
        const nextButton = document.getElementById('nextMonth');

        let currentDate = new Date(); // Date pour suivre le mois affiché

        // Noms des mois en français
        const months = [
            "Janvier", "Février", "Mars", "Avril", "Mai", "Juin",
            "Juillet", "Août", "Septembre", "Octobre", "Novembre", "Décembre"
        ];

        // --- FONCTIONS DE GESTION DE L'AFFICHAGE ET DE LA LOGIQUE ---

        /**
         * Affiche les détails d'un jour, met à jour le titre et gère le bouton.
         * @param {number} day - Le numéro du jour cliqué.
         */
        function showEventDetails(day) {
            const today = new Date();
            // Créer une date exacte pour le jour cliqué/sélectionné (heure à minuit)
            const selectedDate = new Date(currentDate.getFullYear(), currentDate.getMonth(), day);

            // Pour la comparaison, on met l'heure d'aujourd'hui à minuit (pour ignorer l'heure actuelle)
            const todayMidnight = new Date(today.getFullYear(), today.getMonth(), today.getDate());

            // --- 1. Gestion du Titre ---

            // Le jour sélectionné est-il aujourd'hui ? (en ignorant l'heure)
            const isToday = (selectedDate.getTime() === todayMidnight.getTime());

            if (isToday) {
                // Condition 1 : Afficher "Séance du Jour"
                selectedDateDisplay.textContent = `Séance d'aujourd'hui`;
            } else {
                // Afficher la date complète
                const month = months[currentDate.getMonth()];
                const year = currentDate.getFullYear();
                selectedDateDisplay.textContent = `Séance du ${day} ${month} ${year}`;
            }

            // --- 2. Gestion de la visibilité du Bouton ---

            // Condition 2 : La date sélectionnée est-elle strictement antérieure à aujourd'hui (minuit) ?
            const isPast = (selectedDate.getTime() < todayMidnight.getTime());

            if (isPast) {
                // Cacher le bouton pour les jours passés
                addButton.style.display = 'none';
            } else {
                // Afficher le bouton pour Aujourd'hui et les jours futurs
                addButton.style.display = 'block';
            }

            // --- 3. Affichage de la vue de détail ---
            calendarContainer.classList.add('hidden');
            eventDetails.classList.remove('hidden');
        }

        /**
         * Revient à la vue Calendrier. (Utile pour la navigation entre pages)
         */
        function showCalendar() {
            calendarContainer.classList.remove('hidden');
            eventDetails.classList.add('hidden');
        }


        /**
         * Rend le calendrier pour le mois et l'année donnés.
         */
        function renderCalendar(date) {
            const currentYear = date.getFullYear();
            const currentMonth = date.getMonth();
            const today = new Date();

            monthYearDisplay.textContent = `${months[currentMonth]} ${currentYear}`;

            const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
            let firstDayOfWeek = new Date(currentYear, currentMonth, 1).getDay();
            if (firstDayOfWeek === 0) firstDayOfWeek = 7;
            const startDayOffset = firstDayOfWeek - 1;

            calendarGrid.innerHTML = '';

            for (let i = 0; i < startDayOffset; i++) {
                const dayElement = document.createElement('div');
                dayElement.classList.add('day', 'empty');
                calendarGrid.appendChild(dayElement);
            }

            for (let day = 1; day <= daysInMonth; day++) {
                const dayElement = document.createElement('div');
                dayElement.classList.add('day', 'current-month');
                dayElement.textContent = day;

                // Marquer le jour actuel (Aujourd'hui)
                if (currentYear === today.getFullYear() &&
                    currentMonth === today.getMonth() &&
                    day === today.getDate()) {
                    dayElement.classList.add('today');
                }

                // Écouteur d'événement au clic sur un jour
                dayElement.addEventListener('click', () => {
                    showEventDetails(day);
                });

                calendarGrid.appendChild(dayElement);
            }
        }

        // --- Gestion des événements de navigation (Changement de mois) ---

        prevButton.addEventListener('click', () => {
            currentDate.setMonth(currentDate.getMonth() - 1);
            renderCalendar(currentDate);
            showCalendar(); // On revient au calendrier après le changement de mois
        });

        nextButton.addEventListener('click', () => {
            currentDate.setMonth(currentDate.getMonth() + 1);
            renderCalendar(currentDate);
            showCalendar(); // On revient au calendrier après le changement de mois
        });

        // --- Logique d'affichage initial (Afficher la séance du jour au chargement/switch) ---

        // 1. Initialiser l'affichage du calendrier au mois actuel
        renderCalendar(currentDate);

        const workoutPage = document.getElementById('workout');

        const initialSetup = () => {
            // Afficher la vue de détail pour AUJOURD'HUI
            showEventDetails(new Date().getDate());
        };

        // Si la page 'workout' est la page active au chargement, on lance l'initialisation
        if (workoutPage.classList.contains('active')) {
            initialSetup();
        }

        // Écouteur sur les boutons de navigation du bas (pour l'initialisation)
        const navItems = document.querySelectorAll('.nav-item');
        navItems.forEach(item => {
            item.addEventListener('click', (e) => {
                const pageName = e.currentTarget.querySelector('.nav-label').textContent;
                if (pageName === 'Sport') {
                    // Petite attente pour s'assurer que le switchPage a eu lieu avant initialSetup
                    setTimeout(initialSetup, 100);
                } else {
                    // Si on quitte la page Sport, on revient à la vue calendrier par défaut
                    showCalendar();
                }
            });
        });
    });
</script>

</html>